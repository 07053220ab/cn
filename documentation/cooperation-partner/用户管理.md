# 用户管理

京东云为合作伙伴自运营平台的用户管理提供支撑服务，用户可以直接在合作伙伴平台开通京东云账号并完成实名认证。具体的用户支撑功能见下表。

| 接口 | 功能描述 |
| :----------------------| :----------------------|
| [校验用户注册信息](#1)     | 调用接口判断用户手机是否允许注册京东云账号</br>创建京东云账号必须关联一个有效的手机号，对于同一个合作伙伴平台，每个手机或邮箱只能注册一个京东云账号 |
| [发送用户身份验码](#2)      | 调用接口向用户发送短信验证码</br>用户注册京东云时，向用户发送短信验证码 |
| [创建用户账号](#3)          | 调用接口为用户创建京东云账号</br>创建京东云用户账号，创建成功后将向合作伙伴返回京东云账号标识 |
| [同步用户实名信息](#4)   | 调用接口将用户的实名认证信息同步到京东云</br>已在合作伙伴平台完成实名认证的用户，可以直接将实名信息同步到京东云 |

## 接口调用说明

<h3 id="1">1. 校验用户注册信息：checkUserInfo</h3>

**功能介绍**</br>
用户注册京东云时，通过该接口预先判断京东云是否允许用户的手机号进行注册。对每个合作伙伴下的用户，一个手机号只能注册一个京东云账号，如果超过限制则需提示用户手机号已被占用。

**接口方式**</br>
POST

**请求地址**</br>
https://cp.jdcloud-api.com/v1/partner/{partnerId}/user:checkUserInfo

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| partnerId | String | 是 | 无 | 京东云分配的合作伙伴ID |

**请求参数**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| checkUserInfo | CheckUserInfo | 是 | 无 | 见CheckUserInfo结构说明 |

**CheckUserInfo**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| checkType | String | 是 | 无 | 注册方式类型校验，对于合作伙伴，用于注册的用户信息为手机号。该字段必须传："mobile" |
| checkValue | String | 是 | 无 | 用户手机号，包括国家码（国家码为4位数字，以00或0开头，如0086或0852），手机号格式为：XXXX-XXXXXXXX。京东云不校验大陆以外的手机号格式，仅进行唯一性判断；合作伙伴如需校验用户手机格式，则需自行校验 |

**返回参数**

| 名称 | 类型 | 描述 |
| :----| :---| :----|
| result | Result | 见Result结果说明 |
| requestId | String | 请求标识ID |

**Result**

| 名称 | 类型 | 描述 | 
| :----| :---| :----|
| status | Integer | 0-注册方式可用，1-该注册方式不可用 |

**状态码**

| 状态码 | 描述 |
| :-----| :----|
| 200 | OK |
| 400 | 请求参数错误 |

**请求示例（Java）**
```
```

<h3 id="2">2. 发送用户身份验码：sendVerificationCode</h3>

**功能介绍**</br>
给指定手机号发送短信验证码，短信示例为：“验证码：123456，5分钟内有效。您正在授权开通京东云服务，为保证您的账户安全，请勿外泄”。后续创建用户账号环节，需要回传用户输入的验证码，用于验证身份。

**接口方式**</br>
POST

**请求地址**</br>
https://cp.jdcloud-api.com/v1/partner/{partnerId}/user:sendVerificationCode

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| partnerId | String | 是 | 无 | 京东云分配的合作伙伴ID |

**请求参数**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| sendVerificationCodeInfo | SendVerificationCodeInfo | 是 | 无 | 见SendVerificationCodeInfo结构说明 |

**SendVerificationCodeInfo**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| mobilePhone | String | 是 | 无 | 手机号，京东云不校验手机号有效性，如果有效则能发送短信成功，否则不能发送成功 |
| countryCode | String | 否 | 无 | 国家码，00或0开头4位数字。如不指定则默认为"0086" |
| timeout     | String | 否 | 无 | 验证码过期分钟数，值为1-15分钟。如不指定则默认为5分钟过期 |

**返回参数**

| 名称 | 类型 | 描述 |
| :----| :---| :----|
| requestId | String | 请求标识ID |

**状态码**

| 状态码 | 描述 |
| :-----| :----|
| 200 | OK |
| 400 | 请求参数错误 |

**请求示例（Java）**
```
```

<h3 id="3">3. 创建用户账号：createUser</h3>

**功能介绍**</br>
创建用户的京东云账号，创建时需要提供身份验证码。同时，合作伙伴应提供用户在合作伙伴侧的用户标识和用户显示名称。账号创建成功后，京东云侧会将用户的京东云账号与合作伙伴平台用户标识进行关联。

**接口方式**</br>
POST

**请求地址**
https://cp.jdcloud-api.com/v1/partner/{partnerId}/user:createUser

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| partnerId | String | 是 | 无 | 京东云分配的合作伙伴ID |

**请求参数**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| createUserInfo | CreateUserInfo | 是 | 无 | 见CreateUserInfo结构说明 |

**CreateUserInfo**

| 名称 | 类型 | 是否必须 | 默认值 | 描述 |
| :----| :---| :--------| :-----| :----|
| userId | String | 是 | 无 | 用户在合作伙伴平台上的用户唯一标识，创建成功后，京东云会将用户的京东云账号和userId标识进行关联 |
| name | String | 是 | 无 | 用户在合作伙伴平台上的用户显示名称，创建成功后，如果用户登录到京东云控制台，将向用户显示该名称 |
| countryCode | String | 否 | 0086 | 手机国家码，00或0开头4位数字。如不指定则默认为"0086" |
| mobilePhone | String | 是 | 无 | 手机号，必须和 sendVerificationCode 接口中进行验证的手机号保持一致。创建成功后，该手机号将成为用户在京东云的验证手机；</br>对同一合作伙伴，一个手机号只能创建一个账号，否则账号无法创建成功 |
| verificationCode | String | 是 | 无 | 通过 sendVerificationCode 接口发送的验证码回填信息，验证码必须校验成功，京东云账号才能被创建 |
| email | String | 否 | 无 | 邮箱，如果提供email，创建成功后京东云账号会关联该邮箱 |

**返回参数**

| 名称 | 类型 | 描述 |
| :----| :---| :----|
| result | Result | 见Result结构说明 |
| requestId | String | 请求标识ID |

**Result**

| 名称 | 类型 | 描述 |
| :----| :---| :----|
| name | String | 用户在合作伙伴平台的显示名 |
| userId | String | 用户在合作伙伴平台的唯一标识，用于标识当前创建的是哪个用户的账号 |

**状态码**

| 状态码 | 描述 |
| :-----| :----|
| 200 | OK |
| 400 | 请求参数错误 |

**请求示例（Java）**
```
```

