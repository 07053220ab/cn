# DDoS攻击简介

DDoS(分布式拒绝服务)攻击是一种针对目标系统的恶意网络攻击行为，DDoS攻击经常会导致被攻击者的业务无法正常访问，也就是所谓的拒绝服务。

## 常见的DDoS攻击

- **网络层攻击**：比较典型的网络层攻击是UDP反射攻击，比如：NTP Flood攻击。这类攻击主要利用大流量拥塞被攻击者的网络带宽，导致被攻击者的业务无法正常
响应客户的访问。

- **传输层攻击**：比较典型的传输层攻击类型包括SYN Flood攻击、ACK Flood攻击、连接数攻击等。这类攻击通过占用服务器的连接池资源从而达到拒绝服务的目的。

- **会话层攻击**：比较典型的攻击类型是SSL链接攻击。这类攻击占用服务器的SSL会话资源从而达到拒绝服务的目的。

- **应用层攻击**：比较典型的应用层攻击包括DNS Flood攻击、HTTP Flood攻击、游戏假人攻击等。这种类型的攻击占用服务器的应用处理资源，极大地消耗服务器
处理性能从而达到拒绝服务的目的。

## DDoS攻击缓解最佳实践

作为京东云的客户，建议您从以下几个方面着手缓解DDoS攻击的威胁：

1、缩小暴露面，将不相关的业务和资源，降低被攻击的风险。

2、优化业务架构，利用公共云的特性设计弹性伸缩和灾备切换的系统。

3、服务器安全加固，提升服务器自身的连接数等性能。

4、做好业务的监控和应急响应。

5、选择合适的安全方案。京东云为您提供了免费的DDoS基础防护。同时也提供了[Ip高仿](https://ip-anti-console.jdcloud.com/instancelist)等商业
   的安全防御方案。

### 1、缩小暴露面

**1.1 配置安全组**

尽量避免将非业务必须的服务端口暴露在公网上，从而避免与业务无关的请求和访问。通过配置安全组可以有效防止系统被扫描或者意外暴露。

**1.2 使用专有网络（VPC）**

通过专有网络VPC实现网络内部逻辑隔离，防止来自内网肉鸡的攻击。
关于专线网络，可参见：[专线网络](https://cns-console.jdcloud.com/host/physicalConnection/list)

### 2、优化业务架构

**2.1 科学评估业务架构性能**

在业务部署前期或运营期间，技术团队应该对业务架构进行压力测试，以评估现有架构的业务吞吐处理能力，为DDoS防御提供详细的技术参数指导信息。

**2.2 部署弹性冗余架构**

通过负责均衡架构、或异地多中心的架构避免业务架构中出现单点故障。如果您的业务在京东云上，我们可以使用灵活的负载均衡服务实现多台服务器的多点并发
处理业务访问，将用户访问流量均衡到各个服务器上，降低单台服务器的压力，提升业务吞吐处理能力，这样就可以有效缓解一定流量范围内的连接层DDoS攻击。

关于负载均衡的使用，可参见：[负载均衡](https://cns-console.jdcloud.com/host/loadBalance/list)

**2.3 部署弹性伸缩**

弹性伸缩（Auto Scaling），是根据用户的业务需求和策略，经济地自动调整弹性计算资源的管理服务。通过部署弹性伸缩，系统可以有效的缓解会话层和应用层攻击，在遭受攻击时自动增加服务器，提升处理性能，避免业务遭受严重影响。

关于弹性伸缩，请参见：[弹性伸缩](https://autoscaling-console.jdcloud.com/asGroup)。

**2.4 部署智能DNS解析**

通过智能解析的方式优化DNS解析，可以有效避免DNS流量攻击产生的风险。同时，建议您将业务托管至多家DNS服务商。

- 屏蔽未经请求发送的DNS响应信息
- 丢弃快速重传的数据包
- 启动TTL
- 丢弃未知来源的DNS查询请求和响应数据
- 丢弃未经请求或突发的DNS请求
- 启动DNS客户端验证
- 对响应信息进行缓存处理
- 使用ACL的权限
- 使用ACL，BCP38及IP信誉功能

**2.4 提供余量带宽**

通过对服务器进行性能测试，评估正常业务环境下所能承受的带宽和请求数。在您购买带宽是确保有一定的余量带宽，这样可以避免遭受攻击时带宽大于正常使用量而影响
正常用户的情况。

### 3、服务安全加固

对服务器上的操作系统、软件服务进行安装加固，减少可被攻击的点，增大攻击方的攻击成本：

- 确保服务器的系统文件是最新的版本，并及时的更新系统补丁。
- 对所用的服务器主机进行检查，清楚访问者的来源。
- 过滤不必要的服务和端口。比如，对应WWW服务器，只开放80端口，关闭其余端口，或者在防火墙上设置阻止策略。
- 限制同时打开的SYN半连接数目，缩短SYN半连接的TimeOut时间，限制SYN/ICMP流量。
- 仔细检查网络设备和服务系统的日志。一旦出现漏洞或是时间变更，则说明服务器有可能遭受了攻击。
- 充分利用网络设备保护网络资源。在配置路由器时应该考虑针对流控、包过滤、半连接超时、垃圾包丢弃、来源伪造的数据包丢弃、SYN阈值、禁用ICMP和UDP广播的策略配置。
- 通过iptable之类的软件防火墙限制疑似恶意的IP的TCP新建连接，限制疑似恶意的IP连接及传输速率。

### 4、 业务监控和应急响应

**4.1 DDoS基础防护监控**

当您的业务遭受到DDoS攻击时，DDoS基础防护系统默认会通过短信和邮件的方式发出告信息。针对大流量攻击基础防护DDoS也支持电话报警，建议您在接受到告警信息的
第一时间进行应急处理。

告警信息设置，请参见：[DDoS基础防护告警设置](https://uc.jdcloud.com/message/setting)

**4.2 云监控**
云监控服务可用于收集、获取京东云资源的监控指标或用户自定义的监控指标，探测服务的可用性，并支持针对指标设置警报。
关于云监控，可参见：[云监控](https://cms-console.jdcloud.com/overviewCustom)

**4.3 简历应急响应预案**
根据当前的激素业务架构及人员，提前准备好应急技术预案。必要时，可以提前进行技术演练，以检验应急响应预案的合理性。

