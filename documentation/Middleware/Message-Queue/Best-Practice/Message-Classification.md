# 消息分类
## Topic&Tag

Topic和Tag都可以用来进行消息区分，作为业务上消息的不同标识。

- Topic：主题，一般对于不同业务的消息进行区分，具有消息隔离性，即订阅者如果只订阅了TopicA，那么它不会接收到TopicB的消息。

- Tag：标签，一般用于某个Topic下的消息进一步分类，消息队列 JCQ允许对消费者和消息设置标签Tag来进行消息过滤，确保最终只消费到消息者想要获得的消息。同一Topic内的消息不具有消息隔离性，消费者只是对消息进行筛选，如果不设置标签，那么消费者可以获得Topic内的全量消息。

### 选择

为了消息分类，用户可以选择创建多个 Topic， 或者在同一个 Topic 下创建多个 Tag。 但可以从以下角度考虑：

1. 消息隔离：如果消息有数据隔离性的要求，则需要用Topic来区分，Tag无法做到完全的数据隔离。
2. 消息类型：如果需要发送的消息类型不同如普通消息和全局顺序消息，则消息需要用Topic来区分。
3. 消息体量：如果不同消息的体量差距较大，为了保证接收体量小的消息的时效性，建议用Topic来进行消息区分。
4. 业务关联：建议不同的业务消息用Topic来区分，同一业务下的不同类别用Tag来区分。



## 消息过滤

消息队列 JCQ允许对消费者和消息设置标签Tag来进行消息过滤，消息过滤的方式是消费者对于消息的筛选。用户对某个Topic下的消息用Tag进行分类，消费者按照 Tag 对消息进行过滤，确保最终只消费到消息者想要获得的消息。

### 订阅一致

消息队列 JCQ中采取的Pub/Sub模式，消费者想要消费消息需要通过订阅的方式用ConsumerGroup去订阅某个Topic，而为了提升消费效率，ConsumerGroup下允许多个Consumer进行消费。由于模型关系，为了不丢失消息，需要ConsumerGroup下的所有Consumer设置的Tag保持一致，保证同一订阅下的同一ConsumerGroup中的不同Consumer消费的行为一致。

保持订阅一致即：
- 同一ConsumerGroup下的所有Consumer设置的Tag一致

相关代码请前往[SDK参考](https://docs.jdcloud.com/cn/message-queue/produce-standard-message)。

