# 虚拟服务器组管理

虚拟服务器组是一组处理负载均衡分发的服务请求的后端服务器。 虚拟服务器组管理用来指导您添加一个虚拟服务器组和管理已有虚拟服务器组，可添加的虚拟服务器组包括实例类型和IP类型（仅FullNAT模式的NLB支持）两种：
- IP类型：IP类型的虚拟服务器组可注册IP地址作为后端服务器。当您的后端服务器位于VPC外（例如：混合云场景下，后端服务器通过专线或VPC peering提供服务）时，请选择此类型。
- 实例类型：实例类型的虚拟服务器组可注册实例（云主机和原生容器）作为后端服务器，实例必须与网络负载均衡属于同一地域的同一私有网络。

## 操作步骤

### 新建实例类型的虚拟服务器组
1.您可以在网络负载均衡列表页通过以下两种方式，进入虚拟服务器组列表页。

  - 点击 **名称**  栏下的指定网络负载均衡，进入该网络负载均衡详情页。点击 **虚拟服务器组** 页签，进入虚拟服务器组列表页。
  -  点击 **操作** 栏下的 **添加监听** 链接，进入监听器列表页。点击 **虚拟服务器组** 页签，进入虚拟服务器组列表页。

2.点击 **新建虚拟服务器组** 按钮，选择类型为实例。

3.在 **可选实例** 列表的 **类型** 栏选择要添加的实例类型，包括全部、云主机和容器三类。点击 **添加** 按钮将选择的实例添加到已选实例列表。

4.配置已选实例的端口号和权重，点击 **确定** 按钮完成添加虚拟服务器组的操作。

    注意：同一实例可通过不同端口注册到同一虚拟服务器组。

| 参数	| 说明	| 
| :- | :- |
|端口|实例提供服务的端口，输入范围为1-65535。如不填写本参数，默认使用后端服务的端口|
|权重|实例在整个虚拟服务器组中所占的权重，输入范围为0-100。权重越高的实例被分发到服务请求的概率越大|

### 新建IP类型的虚拟服务器组
1.您可以在网络负载均衡列表页通过以下两种方式，进入虚拟服务器组列表页。

  - 点击 **名称**  栏下的指定网络负载均衡，进入该网络负载均衡详情页。点击 **虚拟服务器组** 页签，进入虚拟服务器组列表页。
  -  点击 **操作** 栏下的 **添加监听** 链接，进入监听器列表页。点击 **虚拟服务器组** 页签，进入虚拟服务器组列表页。

2.点击 **新建虚拟服务器组** 按钮，选择类型为IP。

3.点击 **注册新IP** 增加一条记录，配置IP、端口和权重，可根据需求添加多条记录，点击 **确定** 完成添加IP类型的虚拟服务器组操作。

         注意：同一IP可通过不同端口注册到同一虚拟服务器组。

| 参数	| 说明	| 
| :- | :- |
|IP|注册的后端服务器的IP地址。输入范围为10.0.0.0/8、172.16.0.0/12和192.168.0.0/16。当后端服务器位于VPC外（例如：后端服务器通过专线或VPC peering与NLB互通）时，请使用IP注册到虚拟服务器组|
|端口|IP对应的后端服务器提供服务的端口，输入范围为1-65535。如不填写本参数，默认使用后端服务的端口|
|权重|IP对应的后端服务器在整个虚拟服务器组中所占的权重，输入范围为0-100。权重越高的实例被分发到服务请求的概率越大|

### 管理虚拟服务器组
1.查看虚拟服务器组详情：点击 **名称**  栏下的指定虚拟服务器组，进入详情页查看其详细信息。
 
2.编辑虚拟服务器组：点击 **操作** 栏下的 **编辑**，在弹出的对话框中可修改虚拟服务器组的所有配置信息。
 
3.删除虚拟服务器组：点击 **操作** 栏下的 **删除**，可删除指定虚拟服务器组。
		
