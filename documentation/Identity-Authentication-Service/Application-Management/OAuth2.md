# 京东云OAuth2接入指引
## 一. 什么是京东云OAuth2
**OAuth2**（开放授权）是一个开放的标准授权协议，允许用户授权第三方应用访问该用户存储在服务商处的私密资源。用户无需向第三方应用共享自己在服务商处的用户名和密码，而是提供给第三方应用一个令牌，第三方应用即可使用该令牌来访问服务商处该用户的资源。每一个令牌只能授权给一个特定的应用在特定的时间段内访问特定的资源，因此第三方应用无法访问未经用户授权的资源。</br>
OAuth2的更多说明，请参考其[官方网站](https://oauth.net/2/)。</br>

**京东云OAuth2**采用OAuth2协议来实现用户的身份验证和授权，以支持第三方应用在用户授权的基础上，获取用户的身份信息及通过京东云OpenAPI访问用户在京东云的信息或资源。</br>

## 二. 接入京东云OAuth2
京东云OAuth2支持网站或Web应用接入，接入流程如下：</br>
1. [创建应用](../../../documentation/Identity-Authentication-Service/Application-Management/Create-Application.md)，获取client_id；</br>
2. 根据[京东云OAuth2协议](#0)，开发应用：</br>
&emsp;2.1 在应用中[放置京东云登录按钮](#1)；</br>
&emsp;2.2 [获取用户的授权码](#2)；</br>
&emsp;2.3 [获取用户的访问令牌](#3)；</br>
&emsp;2.4 [获取用户的京东云账号](#4)；</br>
&emsp;2.5 如有必要，[刷新访问令牌](#5)；</br>
&emsp;2.6 如有必要，[撤销令牌](#6)。</br>

<h3 id="0">京东云OAuth2协议</h3>

**名词解释**</br>
资源所有者（Resource Owner）：终端用户</br>
客户代理（User-Agent）：浏览器</br>
客户端（Client）：第三方应用</br>
授权服务器（Authorization Server）：京东云授权服务器</br>

**授权流程**</br>

![](../../../image/Identity-Authentication-Service/Application-Management/authorization_code.png)

（A）用户通过浏览器访问应用，发起京东云登录时，应用向京东云授权服务器发起授权登录请求（提供应用的client_id和重定向URI），如果京东云接受该请求，浏览器将重定向到京东云；</br>
（B）京东云验证用户的身份（通过用户登录），并询问用户是否同意给应用授权；</br>
（C）如果用户进行授权，京东云将浏览器重定向回到应用在(A)步骤中提供的重定向URI，同时向应用颁发一个授权码；</br>


（D）客户端通过包含上一步中收到的授权码从授权服务器的令牌端点请求访问令牌。当发起请求时，客户端与授权服务器进行身份验证。客户端包含用于获得授权码的重定向URI来用于验证。
（E）授权服务器对客户端进行身份验证，验证授权代码，并确保接收的重定向URI与在步骤（C）中用于重定向（资源所有者的用户代理）到客户端的URI相匹配。如果通过，授权服务器响应返回访问令牌与可选的刷新令牌。



<h3 id="1">放置京东云登录按钮</h3>

<h3 id="2">获取用户的授权码</h3>

<h3 id="3">获取用户的访问令牌</h3>

<h3 id="4">获取用户的京东云账号</h3>

<h3 id="5">刷新访问令牌</h3>

<h3 id="6">撤销令牌</h3>

